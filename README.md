# esp-webpack-boilerplate
Шаблон проекта для разработки веб-приложений
- Сборка средствами Webpack
- Минификация HTML, JS, CSS
- Добавление hash компиляции для автоматической очистки кэша
- Все настройки проекта в `package.json`

## Компиляция
### Одиночный файл
Вывод в одиночный файл `./dist/single/` с инлайном скриптов, стилей и иконки в b64.

> `npm run build_single`

### Для хостинга
Вывод в пакет отдельных файлов для хостинга `./index/`, включая файлы для установки PWA-приложения (манифест и service worker):
- Воркер настроен на оффлайн работу из кэша с фоновым обновлением кэша при наличии сети. Как активировать воркер показано в примере `index.js`
- Цвета приложения в манифесте настраиваются из `package.json`, иконка приложения - `icon.png`
- Для хостинга на GitHub Pages достаточно включить Pages на корень репозитория, сайт будет доступен по `https://USERNAME.github.io/REPO/` - в корне репозитория есть файл index.html, который переадресует запрос на папку `/index/`

> `npm run build`

### Для ESP
Вывод в 4 раздельных файла `./dist/esp/` с последующим сжатием в gzip `./dist/esp_gz/` и выводом в .h файл в виде PROGMEM массивов для отправки веб-сервером ESP. HTML не кешируем, остальное кешируем, пример есть в `esp_example`.

> `npm run build_esp`

## Как собрать
- Установить [VS Code](https://code.visualstudio.com/download)
- Установить [Node JS](https://nodejs.org/en/download/prebuilt-installer)
- Опционально установить расширение `Script Buttons` для VS Code
- Открыть папку в VS Code (перетащить в окно VS Code)
- Консоль **Ctrl + `**
- `npm install`, дождаться установки зависимостей
- Запустить нужный скрипт кнопкой, батником (например build_esp.bat) или в консоли `npm run build_esp`
- Проект соберётся в папку dist (index для хоста)

## Отладка
`npm run dev` или скрипт *dev.bat* запустит dev сервер и откроет браузер, будет обновлять сайт при изменениях в коде. Чтобы закрыть - `Ctrl+C`.